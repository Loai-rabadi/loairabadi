<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… Ù†Ø§Ø³Ø§ Ù„Ù„Ø·Ù‚Ø³ - ØªØ·ÙˆÙŠØ± Ø£Ø±Ø¯Ù†ÙŠ</title>
    
    <!-- Leaflet CSS & JS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;900&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Animate.css -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    
    <!-- AOS (Animate On Scroll) -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    
    <!-- Swiper CSS & JS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css"/>
    <script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>
    
    <!-- three.js for 3D effects -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <style>
        :root {
            --jordan-red: #9e3030;
            --jordan-green: #2a5c2a;
            --jordan-black: #000;
            --jordan-white: #fff;
            --jordan-gold: #d4af37;
            --jordan-sand: #e6d2b5;
            --card-bg: rgba(255, 255, 255, 0.95);
            --gradient-jordan: linear-gradient(135deg, var(--jordan-red), var(--jordan-green), var(--jordan-black));
            --gradient-sand: linear-gradient(135deg, #f5e8c8, #e6d2b5);
            --gradient-gold: linear-gradient(135deg, #d4af37, #f7ef8a);
            --border-radius: 16px;
            --transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Tajawal', sans-serif;
            background: var(--gradient-sand);
            color: #333;
            line-height: 1.6;
            overflow-x: hidden;
            perspective: 1000px;
            background-image: 
                radial-gradient(circle at 20% 80%, rgba(212, 175, 55, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(158, 48, 48, 0.1) 0%, transparent 50%),
                url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIj48ZGVmcz48cGF0dGVybiBpZD0icGF0dGVybiIgeD0iMCIgeT0iMCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBwYXR0ZXJuVW5pdHM9InVzZXJTcGFjZU9uVXNlIiBwYXR0ZXJuVHJhbnNmb3JtPSJyb3RhdGUoMCkiPjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InJnYmEoMjM0LDIwNSwxNjEsMC4wNSkiLz48cGF0aCBkPSJNMCAyMGg0MFYweiIgZmlsbD0icmdiYSgxNTgsMTIwLDkzLDAuMDMpIi8+PHBhdGggZD0iTTIwIDBoMjB2NDB6IiBmaWxsPSJyZ2JhKDE1OCwxMjAsOTMsMC4wMykiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjcGF0dGVybikiLz48L3N2Zz4=');
        }
        
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiPjxjaXJjbGUgY3g9IjUlIiBjeT0iMTUlIiByPSIxIiBmaWxsPSIjZDRhZjM3IiBvcGFjaXR5PSIwLjMiLz48Y2lyY2xlIGN4PSIxNSUiIGN5PSI1MCUiIHI9IjAuNSIgZmlsbD0iI2Q0YWYzNyIgb3BhY2l0eT0iMC4yIi8+PGNpcmNsZSBjeD0iNzAlIiBjeT0iMzAlIiByPSIwLjciIGZpbGw9IiNkNGFmMzciIG9wYWNpdHk9IjAuNCIvPjxjaXJjbGUgY3g9IjkwJSIgY3k9IjgwJSIgcj0iMC4zIiBmaWxsPSIjZDRhZjM3IiBvcGFjaXR5PSIwLjUiLz48Y2lyY2xlIGN4PSI1MCUiIGN5PSI4NSUiIHI9IjEuMiIgZmlsbD0iI2Q0YWYzNyIgb3BhY2l0eT0iMC40Ii8+PC9zdmc+');
        }
        
        .jordan-flag {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 80px;
            height: 40px;
            background: linear-gradient(to bottom, var(--jordan-black) 33.3%, var(--jordan-white) 33.3%, var(--jordan-white) 66.6%, var(--jordan-green) 66.6%);
            border-radius: 8px;
            box-shadow: var(--shadow);
            z-index: 1000;
            overflow: hidden;
            border: 2px solid var(--jordan-gold);
            animation: flagWave 3s ease-in-out infinite;
            transform-style: preserve-3d;
        }
        
        @keyframes flagWave {
            0%, 100% { transform: rotate(0deg) translateY(0px); }
            50% { transform: rotate(1deg) translateY(-5px); }
        }
        
        .jordan-flag::before {
            content: "";
            position: absolute;
            top: 0;
            right: 0;
            width: 40px;
            height: 100%;
            background-color: var(--jordan-red);
        }
        
        .jordan-flag::after {
            content: "â˜…";
            position: absolute;
            top: 50%;
            right: 10px;
            transform: translateY(-50%);
            color: white;
            font-size: 12px;
            animation: starPulse 2s ease-in-out infinite;
        }
        
        @keyframes starPulse {
            0%, 100% { transform: translateY(-50%) scale(1); }
            50% { transform: translateY(-50%) scale(1.2); }
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            transform-style: preserve-3d;
        }
        
        header {
            text-align: center;
            padding: 60px 0;
            margin-bottom: 40px;
            position: relative;
            background: rgba(255, 255, 255, 0.85);
            border-radius: var(--border-radius);
            margin-top: 30px;
            box-shadow: var(--shadow);
            border: 3px solid var(--jordan-gold);
            backdrop-filter: blur(10px);
            transform-style: preserve-3d;
            animation: headerEntrance 1.5s ease-out;
        }
        
        @keyframes headerEntrance {
            0% { 
                opacity: 0; 
                transform: translateY(-50px) rotateX(10deg);
            }
            100% { 
                opacity: 1; 
                transform: translateY(0) rotateX(0);
            }
        }
        
        .nasa-logo {
            font-size: 4rem;
            color: var(--jordan-red);
            margin-bottom: 25px;
            display: inline-block;
            background: var(--gradient-jordan);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 5px 15px rgba(158, 48, 48, 0.3));
            animation: logoFloat 6s ease-in-out infinite, logoGlow 3s ease-in-out infinite alternate;
            transform-style: preserve-3d;
        }
        
        @keyframes logoFloat {
            0%, 100% { transform: translateY(0px) rotateY(0deg); }
            50% { transform: translateY(-20px) rotateY(5deg); }
        }
        
        @keyframes logoGlow {
            0% { filter: drop-shadow(0 5px 15px rgba(158, 48, 48, 0.3)); }
            100% { filter: drop-shadow(0 5px 25px rgba(158, 48, 48, 0.6)); }
        }
        
        h1 {
            font-size: 3.2rem;
            margin-bottom: 20px;
            background: linear-gradient(to right, var(--jordan-red), var(--jordan-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 900;
            text-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transform: translateZ(30px);
            animation: titleSlide 1s ease-out;
        }
        
        @keyframes titleSlide {
            0% { 
                opacity: 0; 
                transform: translateX(100px) translateZ(30px);
            }
            100% { 
                opacity: 1; 
                transform: translateX(0) translateZ(30px);
            }
        }
        
        .subtitle {
            font-size: 1.4rem;
            max-width: 800px;
            margin: 0 auto 30px;
            font-weight: 500;
            color: #5a4a3a;
            animation: subtitleFade 1.5s ease-out 0.5s both;
        }
        
        @keyframes subtitleFade {
            0% { 
                opacity: 0; 
                transform: translateY(30px);
            }
            100% { 
                opacity: 1; 
                transform: translateY(0);
            }
        }
        
        .jordan-badge {
            background: var(--gradient-jordan);
            color: white;
            padding: 12px 30px;
            border-radius: 50px;
            display: inline-block;
            font-weight: 700;
            margin-top: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            animation: badgePulse 2s ease-in-out infinite;
            transform-style: preserve-3d;
        }
        
        @keyframes badgePulse {
            0%, 100% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.05) rotate(1deg); }
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 30px;
            margin-bottom: 50px;
            transform-style: preserve-3d;
        }
        
        @media (max-width: 992px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
        }
        
        .control-panel {
            background: var(--card-bg);
            padding: 35px;
            border-radius: var(--border-radius);
            border: 3px solid var(--jordan-gold);
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
            transition: var(--transition);
            transform-style: preserve-3d;
            animation: panelSlide 1s ease-out 0.7s both;
        }
        
        @keyframes panelSlide {
            0% { 
                opacity: 0; 
                transform: translateX(-50px) rotateY(5deg);
            }
            100% { 
                opacity: 1; 
                transform: translateX(0) rotateY(0);
            }
        }
        
        .control-panel::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            height: 6px;
            background: var(--gradient-jordan);
            animation: gradientFlow 4s ease infinite;
            background-size: 200% 200%;
        }
        
        @keyframes gradientFlow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .control-panel:hover {
            transform: translateY(-10px) rotateX(5deg) rotateY(2deg);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2), 0 0 30px rgba(212, 175, 55, 0.3);
        }
        
        .map-container {
            background: var(--card-bg);
            padding: 25px;
            border-radius: var(--border-radius);
            border: 3px solid var(--jordan-gold);
            box-shadow: var(--shadow);
            height: 600px;
            position: relative;
            overflow: hidden;
            transition: var(--transition);
            transform-style: preserve-3d;
            animation: mapSlide 1s ease-out 0.9s both;
        }
        
        @keyframes mapSlide {
            0% { 
                opacity: 0; 
                transform: translateX(50px) rotateY(-5deg);
            }
            100% { 
                opacity: 1; 
                transform: translateX(0) rotateY(0);
            }
        }
        
        .map-container:hover {
            transform: translateY(-10px) rotateX(5deg) rotateY(-2deg);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2), 0 0 30px rgba(42, 92, 42, 0.3);
        }
        
        #map {
            width: 100%;
            height: 100%;
            border-radius: 12px;
            border: 2px solid var(--jordan-gold);
            transition: var(--transition);
        }
        
        #map:hover {
            transform: scale(1.02);
        }
        
        .form-group {
            margin-bottom: 30px;
            position: relative;
            transform-style: preserve-3d;
        }
        
        label {
            display: block;
            margin-bottom: 12px;
            font-weight: 700;
            color: #5a4a3a;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            transform: translateZ(10px);
        }
        
        label i {
            margin-left: 12px;
            color: var(--jordan-red);
            font-size: 1.3rem;
            animation: iconBounce 2s ease-in-out infinite;
        }
        
        @keyframes iconBounce {
            0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
            40% {transform: translateY(-10px);}
            60% {transform: translateY(-5px);}
        }
        
        select, input, button {
            width: 100%;
            padding: 16px 22px;
            border-radius: 10px;
            border: 2px solid #e6d2b5;
            background: white;
            color: #333;
            font-family: inherit;
            font-size: 1.1rem;
            transition: var(--transition);
            transform-style: preserve-3d;
        }
        
        select:focus, input:focus {
            outline: none;
            border-color: var(--jordan-red);
            box-shadow: 0 0 0 4px rgba(158, 48, 48, 0.2);
            transform: translateY(-5px) translateZ(10px);
        }
        
        button {
            background: var(--gradient-jordan);
            color: white;
            border: none;
            font-weight: 700;
            cursor: pointer;
            margin-top: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            padding: 18px 25px;
            font-size: 1.2rem;
            position: relative;
            overflow: hidden;
            border: 2px solid var(--jordan-gold);
            transform-style: preserve-3d;
            animation: buttonPulse 3s ease-in-out infinite;
        }
        
        @keyframes buttonPulse {
            0%, 100% { box-shadow: 0 5px 15px rgba(158, 48, 48, 0.3); }
            50% { box-shadow: 0 5px 25px rgba(158, 48, 48, 0.6); }
        }
        
        button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: 0.8s;
        }
        
        button:hover::before {
            left: 100%;
        }
        
        button:hover {
            transform: translateY(-8px) translateZ(15px) scale(1.05);
            box-shadow: 0 15px 30px rgba(158, 48, 48, 0.4);
        }
        
        .results {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 30px;
            margin-bottom: 50px;
            transform-style: preserve-3d;
        }
        
        .card {
            background: var(--card-bg);
            padding: 30px;
            border-radius: var(--border-radius);
            border: 3px solid var(--jordan-gold);
            box-shadow: var(--shadow);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            animation: cardEntrance 0.8s ease-out both;
            transform-style: preserve-3d;
            cursor: pointer;
        }
        
        .card:nth-child(1) { animation-delay: 0.1s; }
        .card:nth-child(2) { animation-delay: 0.2s; }
        .card:nth-child(3) { animation-delay: 0.3s; }
        
        @keyframes cardEntrance {
            0% { 
                opacity: 0; 
                transform: translateY(50px) rotateX(-15deg) scale(0.9);
            }
            100% { 
                opacity: 1; 
                transform: translateY(0) rotateX(0) scale(1);
            }
        }
        
        .card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            height: 6px;
            background: var(--gradient-jordan);
            transform: scaleX(0);
            transform-origin: right;
            transition: transform 0.5s ease;
        }
        
        .card:hover::before {
            transform: scaleX(1);
        }
        
        .card:hover {
            transform: translateY(-15px) rotateY(5deg) rotateX(5deg) scale(1.03);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }
        
        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 25px;
            transform: translateZ(20px);
        }
        
        .card-header i {
            font-size: 2.5rem;
            margin-right: 18px;
            background: var(--gradient-jordan);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: iconSpin 10s linear infinite;
        }
        
        @keyframes iconSpin {
            0% { transform: rotateY(0deg); }
            100% { transform: rotateY(360deg); }
        }
        
        .card h3 {
            font-size: 1.6rem;
            margin-bottom: 18px;
            color: #5a4a3a;
            transform: translateZ(15px);
        }
        
        .probability {
            font-size: 3rem;
            font-weight: 900;
            text-align: center;
            margin: 25px 0;
            background: var(--gradient-jordan);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            position: relative;
            display: inline-block;
            animation: numberCount 2s ease-out;
            transform: translateZ(25px);
        }
        
        @keyframes numberCount {
            0% { 
                opacity: 0; 
                transform: translateZ(25px) scale(0.5);
            }
            70% { 
                transform: translateZ(25px) scale(1.1);
            }
            100% { 
                opacity: 1; 
                transform: translateZ(25px) scale(1);
            }
        }
        
        .probability::after {
            content: '';
            position: absolute;
            bottom: -12px;
            right: 50%;
            transform: translateX(50%);
            width: 60px;
            height: 4px;
            background: var(--gradient-jordan);
            border-radius: 4px;
            animation: lineExtend 1s ease-out 0.5s both;
        }
        
        @keyframes lineExtend {
            0% { width: 0; }
            100% { width: 60px; }
        }
        
        .weather-icon {
            font-size: 3rem;
            margin: 20px 0;
            animation: weatherFloat 4s ease-in-out infinite;
            display: block;
            text-align: center;
        }
        
        @keyframes weatherFloat {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-15px) rotate(5deg); }
        }
        
        .chart-container {
            background: var(--card-bg);
            padding: 35px;
            border-radius: var(--border-radius);
            border: 3px solid var(--jordan-gold);
            box-shadow: var(--shadow);
            margin-bottom: 50px;
            position: relative;
            transition: var(--transition);
            transform-style: preserve-3d;
            animation: chartSlide 1s ease-out 1.1s both;
        }
        
        @keyframes chartSlide {
            0% { 
                opacity: 0; 
                transform: translateY(50px) scale(0.95);
            }
            100% { 
                opacity: 1; 
                transform: translateY(0) scale(1);
            }
        }
        
        .chart-container:hover {
            transform: translateY(-10px) rotateX(3deg);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }
        
        .chart-container::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            height: 6px;
            background: var(--gradient-jordan);
        }
        
        .data-actions {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 30px;
            transform-style: preserve-3d;
        }
        
        .secondary-btn {
            background: transparent;
            border: 3px solid var(--jordan-green);
            color: var(--jordan-green);
            animation: secondaryPulse 3s ease-in-out infinite;
        }
        
        @keyframes secondaryPulse {
            0%, 100% { box-shadow: 0 5px 15px rgba(42, 92, 42, 0.2); }
            50% { box-shadow: 0 5px 25px rgba(42, 92, 42, 0.4); }
        }
        
        .secondary-btn:hover {
            background: var(--jordan-green);
            color: white;
            transform: translateY(-5px) translateZ(10px);
        }
        
        footer {
            text-align: center;
            padding: 50px 0;
            margin-top: 70px;
            border-top: 3px solid var(--jordan-gold);
            position: relative;
            background: rgba(255, 255, 255, 0.85);
            border-radius: var(--border-radius);
            backdrop-filter: blur(10px);
            animation: footerFade 1s ease-out 1.3s both;
        }
        
        @keyframes footerFade {
            0% { 
                opacity: 0; 
                transform: translateY(50px);
            }
            100% { 
                opacity: 1; 
                transform: translateY(0);
            }
        }
        
        .jordan-text {
            color: var(--jordan-red);
            font-weight: bold;
            margin-top: 15px;
            font-size: 1.3rem;
            animation: textColorShift 5s ease-in-out infinite;
        }
        
        @keyframes textColorShift {
            0%, 100% { color: var(--jordan-red); }
            50% { color: var(--jordan-green); }
        }
        
        .data-source {
            font-size: 1rem;
            opacity: 0.8;
            margin-top: 18px;
        }
        
        /* Swiper Styles */
        .swiper {
            width: 100%;
            height: 100%;
            margin: 40px 0;
            transform-style: preserve-3d;
        }
        
        .swiper-slide {
            text-align: center;
            font-size: 18px;
            background: var(--card-bg);
            border-radius: var(--border-radius);
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 35px;
            flex-direction: column;
            transition: var(--transition);
            border: 3px solid var(--jordan-gold);
            transform-style: preserve-3d;
            animation: slideIn 1s ease-out both;
        }
        
        @keyframes slideIn {
            0% { 
                opacity: 0; 
                transform: translateX(100px) rotateY(20deg);
            }
            100% { 
                opacity: 1; 
                transform: translateX(0) rotateY(0);
            }
        }
        
        .swiper-slide:hover {
            transform: translateY(-10px) rotateY(5deg) scale(1.02);
            box-shadow: 0 15px 30px rgba(0,0,0,0.15);
        }
        
        .swiper-pagination-bullet {
            background: var(--jordan-green);
            opacity: 0.5;
            width: 14px;
            height: 14px;
            transition: var(--transition);
        }
        
        .swiper-pagination-bullet-active {
            background: var(--jordan-red);
            opacity: 1;
            transform: scale(1.2);
        }
        
        /* 3D Earth Container */
        #earth-container {
            position: fixed;
            bottom: 30px;
            left: 30px;
            width: 120px;
            height: 120px;
            z-index: 999;
            cursor: pointer;
            transition: all 0.5s ease;
            border-radius: 50%;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            border: 2px solid var(--jordan-gold);
            animation: earthOrbit 20s linear infinite;
        }
        
        @keyframes earthOrbit {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        #earth-container:hover {
            animation-play-state: paused;
            transform: scale(1.2);
        }
        
        /* Satellite Animation */
        .satellite {
            position: absolute;
            width: 20px;
            height: 20px;
            background: var(--jordan-red);
            border-radius: 50%;
            box-shadow: 0 0 10px var(--jordan-red), 0 0 20px var(--jordan-red);
            animation: orbit 10s linear infinite;
            transform-style: preserve-3d;
            z-index: 1000;
            top: 50%;
            right: 50%;
        }
        
        @keyframes orbit {
            0% {
                transform: rotate(0deg) translateX(80px) rotate(0deg);
            }
            100% {
                transform: rotate(360deg) translateX(80px) rotate(-360deg);
            }
        }
        
        /* Traditional Jordanian Pattern */
        .jordan-pattern {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 40px;
            background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAiIGhlaWdodD0iNDAiPjxwYXRoIGQ9Ik0wIDBoMTB2MTBIMHpNMjAgMGgxMHYxMEgyMHpNNDAgMGgxMHYxMEg0MHpNNjAgMGgxMHYxMEg2MHpNODAgMGgxMHYxMEg4MHpNMCAxMGgxMHYxMEgwek0yMCAxMGgxMHYxMEgyMHpNNDAgMTBoMTB2MTBINDB6TTYwIDEwaDEwdjEwSDYwek04MCAxMGgxMHYxMEg4MHpNMCAyMGgxMHYxMEgwek0yMCAyMGgxMHYxMEgyMHpNNDAgMjBoMTB2MTBINDB6TTYwIDIwaDEwdjEwSDYwek04MCAyMGgxMHYxMEg4MHpNMCAzMGgxMHYxMEgwek0yMCAzMGgxMHYxMEgyMHpNNDAgMzBoMTB2MTBINDB6TTYwIDMwaDEwdjEwSDYwek04MCAzMGgxMHYxMEg4MHoiIGZpbGw9IiM5ZTMwMzAiIG9wYWNpdHk9IjAuMSIvPjwvc3ZnPg==');
            opacity: 0.4;
            z-index: -1;
            animation: patternMove 20s linear infinite;
        }
        
        @keyframes patternMove {
            0% { background-position: 0 0; }
            100% { background-position: 100px 0; }
        }
        
        /* Responsive Adjustments */
        @media (max-width: 768px) {
            h1 {
                font-size: 2.4rem;
            }
            
            .subtitle {
                font-size: 1.2rem;
            }
            
            .dashboard {
                gap: 25px;
            }
            
            .control-panel, .map-container {
                padding: 25px;
            }
            
            .data-actions {
                flex-direction: column;
            }
            
            .probability {
                font-size: 2.5rem;
            }
            
            .jordan-flag {
                width: 70px;
                height: 35px;
                top: 15px;
                right: 15px;
            }
            
            #earth-container {
                width: 80px;
                height: 80px;
                bottom: 20px;
                left: 20px;
            }
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 12px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(230, 210, 181, 0.3);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--gradient-jordan);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--jordan-red);
        }
        
        /* Loading Animation */
        .loader {
            display: inline-block;
            width: 80px;
            height: 80px;
            position: absolute;
            top: 50%;
            right: 50%;
            transform: translate(50%, -50%);
            z-index: 10;
        }
        
        .loader:after {
            content: " ";
            display: block;
            width: 64px;
            height: 64px;
            margin: 8px;
            border-radius: 50%;
            border: 6px solid var(--jordan-red);
            border-color: var(--jordan-red) transparent var(--jordan-red) transparent;
            animation: loader 1.2s linear infinite;
        }
        
        @keyframes loader {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Floating elements animation */
        .floating-element {
            position: absolute;
            width: 20px;
            height: 20px;
            background: var(--jordan-gold);
            border-radius: 50%;
            opacity: 0.3;
            animation: floatAround 15s linear infinite;
            z-index: -1;
        }
        
        @keyframes floatAround {
            0% { transform: translate(0, 0) rotate(0deg); }
            25% { transform: translate(100px, 50px) rotate(90deg); }
            50% { transform: translate(50px, 100px) rotate(180deg); }
            75% { transform: translate(-50px, 50px) rotate(270deg); }
            100% { transform: translate(0, 0) rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="stars"></div>
    <div class="jordan-pattern"></div>
    
    <!-- Floating elements -->
    <div class="floating-element" style="top: 10%; left: 5%; animation-delay: 0s;"></div>
    <div class="floating-element" style="top: 20%; left: 90%; animation-delay: 2s;"></div>
    <div class="floating-element" style="top: 80%; left: 10%; animation-delay: 4s;"></div>
    <div class="floating-element" style="top: 60%; left: 80%; animation-delay: 6s;"></div>
    
    <div class="jordan-flag" title="ØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± ÙÙŠ Ø§Ù„Ø£Ø±Ø¯Ù†"></div>
    
    <!-- 3D Earth Container -->
    <div id="earth-container"></div>
    
    <!-- Satellite -->
    <div class="satellite"></div>
    
    <div class="container">
        <header data-aos="fade-down" data-aos-duration="1000">
            <div class="nasa-logo">
                <i class="fas fa-satellite"></i>
            </div>
            <h1 class="animate__animated animate__fadeIn">Ù†Ø¸Ø§Ù… Ù†Ø§Ø³Ø§ Ù„Ù„Ø·Ù‚Ø³ Ø§Ù„ØªØ§Ø±ÙŠØ®ÙŠ</h1>
            <p class="subtitle animate__animated animate__fadeIn animate__delay-1s">
                Ø§Ø³ØªÙƒØ´Ù Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ù‚Ø³ Ø§Ù„ØªØ§Ø±ÙŠØ®ÙŠØ© Ù…Ù† Ù†Ø§Ø³Ø§ ÙˆØªÙˆÙ‚Ø¹Ø§Øª Ø§Ù„Ø§Ø­ØªÙ…Ø§Ù„Ø§Øª Ù„Ø£ÙŠ Ù…ÙˆÙ‚Ø¹ ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù…. 
                Ø§Ø³ØªØ®Ø¯Ù… Ù‡Ø°Ù‡ Ø§Ù„Ø£Ø¯Ø§Ø© Ù„Ù„ØªØ­Ø¶ÙŠØ± Ù„Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù†Ø§Ø®ÙŠØ© Ù…ÙˆØ«ÙˆÙ‚Ø©.
            </p>
            <div class="jordan-badge">ğŸ‡¯ğŸ‡´ ØªØ·ÙˆÙŠØ± Ø£Ø±Ø¯Ù†ÙŠ Ø¨Ø¥ØªÙ‚Ø§Ù† ğŸ‡¯ğŸ‡´</div>
        </header>
        
        <div class="dashboard">
            <div class="control-panel" data-aos="fade-right" data-aos-duration="1000">
                <div class="form-group">
                    <label for="location-type"><i class="fas fa-map-marker-alt"></i> Ù†ÙˆØ¹ Ø§Ù„Ù…ÙˆÙ‚Ø¹</label>
                    <select id="location-type">
                        <option value="search">Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù…</option>
                        <option value="map">ØªØ­Ø¯ÙŠØ¯ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø©</option>
                        <option value="coordinates">Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª</option>
                    </select>
                </div>
                
                <div class="form-group" id="search-group">
                    <div class="location-search-container">
                        <label for="location-search"><i class="fas fa-search"></i> Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…ÙˆÙ‚Ø¹</label>
                        <input type="text" id="location-search" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø£Ùˆ Ø§Ù„Ù…Ù†Ø·Ù‚Ø©">
                        <div class="search-suggestions" id="search-suggestions"></div>
                    </div>
                </div>
                
                <div class="form-group coordinates-input" id="coordinates-group">
                    <div>
                        <label for="latitude"><i class="fas fa-globe"></i> Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶</label>
                        <input type="text" id="latitude" placeholder="Ù…Ø«Ø§Ù„: 31.95">
                    </div>
                    <div>
                        <label for="longitude"><i class="fas fa-globe"></i> Ø®Ø· Ø§Ù„Ø·ÙˆÙ„</label>
                        <input type="text" id="longitude" placeholder="Ù…Ø«Ø§Ù„: 35.93">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="date-selection"><i class="fas fa-calendar-alt"></i> Ø§Ù„ØªØ§Ø±ÙŠØ®</label>
                    <input type="date" id="date-selection">
                </div>
                
                <div class="form-group">
                    <label for="weather-variables"><i class="fas fa-sliders-h"></i> Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø·Ù‚Ø³</label>
                    <select id="weather-variables">
                        <option value="temperature">Ø¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø±Ø§Ø±Ø©</option>
                        <option value="precipitation">Ù‡Ø·ÙˆÙ„ Ø§Ù„Ø£Ù…Ø·Ø§Ø±</option>
                        <option value="wind">Ø³Ø±Ø¹Ø© Ø§Ù„Ø±ÙŠØ§Ø­</option>
                        <option value="humidity">Ø§Ù„Ø±Ø·ÙˆØ¨Ø©</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="threshold"><i class="fas fa-chart-line"></i> Ø¹ØªØ¨Ø© Ø§Ù„Ø§Ø­ØªÙ…Ø§Ù„ (%)</label>
                    <input type="range" id="threshold" min="0" max="100" value="60">
                    <output for="threshold" id="threshold-value">60%</output>
                </div>
                
                <button id="analyze-btn">
                    <i class="fas fa-satellite"></i> ØªØ­Ù„ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ù†Ø§Ø³Ø§
                </button>
            </div>
            
            <div class="map-container" data-aos="fade-left" data-aos-duration="1000">
                <div id="map"></div>
                <div class="location-picker-tooltip" id="location-picker-tooltip">
                    <i class="fas fa-mouse-pointer"></i> Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ù„ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹
                </div>
            </div>
        </div>
        
        <!-- Swiper Slider for Results -->
        <div class="swiper mySwiper" data-aos="fade-up" data-aos-duration="1000">
            <div class="swiper-wrapper">
                <div class="swiper-slide">
                    <div class="card-header">
                        <i class="fas fa-temperature-high"></i>
                        <h3>Ø¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø±Ø§Ø±Ø©</h3>
                    </div>
                    <div class="weather-icon">ğŸŒ¡ï¸</div>
                    <div class="probability" id="temp-probability">72%</div>
                    <p>Ø§Ø­ØªÙ…Ø§Ù„ÙŠØ© ØªØ¬Ø§ÙˆØ² 30Â°C ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ§Ø±ÙŠØ®ÙŠØ©.</p>
                </div>
                <div class="swiper-slide">
                    <div class="card-header">
                        <i class="fas fa-cloud-rain"></i>
                        <h3>Ù‡Ø·ÙˆÙ„ Ø§Ù„Ø£Ù…Ø·Ø§Ø±</h3>
                    </div>
                    <div class="weather-icon">ğŸŒ§ï¸</div>
                    <div class="probability" id="rain-probability">45%</div>
                    <p>Ø§Ø­ØªÙ…Ø§Ù„ÙŠØ© Ù‡Ø·ÙˆÙ„ Ø£Ù…Ø·Ø§Ø± ØªØ²ÙŠØ¯ Ø¹Ù† 5mm ÙÙŠ 24 Ø³Ø§Ø¹Ø©.</p>
                </div>
                <div class="swiper-slide">
                    <div class="card-header">
                        <i class="fas fa-wind"></i>
                        <h3>Ø³Ø±Ø¹Ø© Ø§Ù„Ø±ÙŠØ§Ø­</h3>
                    </div>
                    <div class="weather-icon">ğŸ’¨</div>
                    <div class="probability" id="wind-probability">28%</div>
                    <p>Ø§Ø­ØªÙ…Ø§Ù„ÙŠØ© ØªØ¬Ø§ÙˆØ² Ø³Ø±Ø¹Ø© Ø§Ù„Ø±ÙŠØ§Ø­ 20km/h Ø®Ù„Ø§Ù„ Ø§Ù„Ù†Ù‡Ø§Ø±.</p>
                </div>
            </div>
            <div class="swiper-pagination"></div>
        </div>
        
        <div class="chart-container" data-aos="fade-up" data-aos-duration="1000">
            <h2><i class="fas fa-chart-area"></i> Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø§Ø­ØªÙ…Ø§Ù„ÙŠ Ù„Ø¯Ø±Ø¬Ø§Øª Ø§Ù„Ø­Ø±Ø§Ø±Ø©</h2>
            <canvas id="weather-chart"></canvas>
            
            <div class="data-actions">
                <button id="download-csv">
                    <i class="fas fa-file-csv"></i> ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (CSV)
                </button>
                <button class="secondary-btn" id="download-json">
                    <i class="fas fa-file-code"></i> ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (JSON)
                </button>
            </div>
        </div>
        
        <footer data-aos="fade-up" data-aos-duration="1000">
            <p>ØªÙ… ØªØ·ÙˆÙŠØ± Ù‡Ø°Ø§ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¨ÙŠØ§Ù†Ø§Øª Ù†Ø§Ø³Ø§ Ù„Ù„Ø·Ù‚Ø³ Ø§Ù„ØªØ§Ø±ÙŠØ®ÙŠ</p>
            <p class="jordan-text">ğŸ‡¯ğŸ‡´ ØªØ·ÙˆÙŠØ± Ø£Ø±Ø¯Ù†ÙŠ Ø¨Ø¥ØªÙ‚Ø§Ù† ğŸ‡¯ğŸ‡´</p>
            <p class="data-source">Ù…ØµØ¯Ø± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: Ù†Ø¸Ø§Ù… Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø£Ø±Ø¶ Ø§Ù„ØªØ§Ø¨Ø¹ Ù„Ù†Ø§Ø³Ø§ (EOSDIS)</p>
        </footer>
    </div>

    <script>
        // Initialize AOS (Animate On Scroll)
        AOS.init({
            duration: 1000,
            once: true,
            offset: 100
        });
        
        // Initialize Swiper
        const swiper = new Swiper(".mySwiper", {
            effect: "coverflow",
            grabCursor: true,
            centeredSlides: true,
            slidesPerView: "auto",
            coverflowEffect: {
                rotate: 20,
                stretch: 0,
                depth: 200,
                modifier: 1,
                slideShadows: true,
            },
            pagination: {
                el: ".swiper-pagination",
                clickable: true
            },
            breakpoints: {
                640: {
                    slidesPerView: 1,
                    spaceBetween: 20,
                },
                768: {
                    slidesPerView: 2,
                    spaceBetween: 30,
                },
                1024: {
                    slidesPerView: 3,
                    spaceBetween: 40,
                },
            }
        });
        
        // Initialize Map
        const map = L.map('map').setView([31.95, 35.93], 7);
        
        // Add Map Layer
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);
        
        // Add Draggable Marker
        const marker = L.marker([31.95, 35.93], {draggable: true}).addTo(map);
        marker.bindPopup('Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ø­Ø¯Ø¯').openPopup();
        
        // Update marker position on drag
        marker.on('dragend', function() {
            const position = marker.getLatLng();
            updateCoordinates(position.lat, position.lng);
            reverseGeocode(position.lat, position.lng);
        });
        
        // Function to update coordinates inputs
        function updateCoordinates(lat, lng) {
            document.getElementById('latitude').value = lat.toFixed(6);
            document.getElementById('longitude').value = lng.toFixed(6);
        }
        
        // Function to reverse geocode coordinates to address
        function reverseGeocode(lat, lng) {
            // Using Nominatim for reverse geocoding
            fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lng}`)
                .then(response => response.json())
                .then(data => {
                    if (data && data.display_name) {
                        document.getElementById('location-search').value = data.display_name;
                    }
                })
                .catch(error => console.error('Error in reverse geocoding:', error));
        }
        
        // Function to geocode address to coordinates
        function geocodeAddress(address) {
            if (!address) return;
            
            // Using Nominatim for geocoding
            fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(address)}`)
                .then(response => response.json())
                .then(data => {
                    if (data && data.length > 0) {
                        const lat = parseFloat(data[0].lat);
                        const lon = parseFloat(data[0].lon);
                        
                        // Update map and marker
                        map.setView([lat, lon], 10);
                        marker.setLatLng([lat, lon]);
                        
                        // Update coordinates inputs
                        updateCoordinates(lat, lon);
                    }
                })
                .catch(error => console.error('Error in geocoding:', error));
        }
        
        // Handle location type change
        document.getElementById('location-type').addEventListener('change', function() {
            const type = this.value;
            const searchGroup = document.getElementById('search-group');
            const coordinatesGroup = document.getElementById('coordinates-group');
            const locationPickerTooltip = document.getElementById('location-picker-tooltip');
            
            // Reset all
            searchGroup.style.display = 'block';
            coordinatesGroup.style.display = 'none';
            locationPickerTooltip.style.display = 'none';
            
            if (type === 'coordinates') {
                searchGroup.style.display = 'none';
                coordinatesGroup.style.display = 'grid';
            } else if (type === 'map') {
                locationPickerTooltip.style.display = 'block';
            }
        });
        
        // Handle map click for location selection
        map.on('click', function(e) {
            if (document.getElementById('location-type').value === 'map') {
                const lat = e.latlng.lat;
                const lng = e.latlng.lng;
                
                // Update marker position
                marker.setLatLng([lat, lng]);
                
                // Update coordinates inputs
                updateCoordinates(lat, lng);
                
                // Reverse geocode to get address
                reverseGeocode(lat, lng);
            }
        });
        
        // Handle location search input
        let searchTimeout;
        document.getElementById('location-search').addEventListener('input', function() {
            clearTimeout(searchTimeout);
            const query = this.value.trim();
            
            if (query.length < 3) {
                document.getElementById('search-suggestions').style.display = 'none';
                return;
            }
            
            searchTimeout = setTimeout(() => {
                // Using Nominatim for search suggestions
                fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(query)}&limit=5`)
                    .then(response => response.json())
                    .then(data => {
                        const suggestionsContainer = document.getElementById('search-suggestions');
                        suggestionsContainer.innerHTML = '';
                        
                        if (data && data.length > 0) {
                            data.forEach(place => {
                                const div = document.createElement('div');
                                div.textContent = place.display_name;
                                div.addEventListener('click', () => {
                                    document.getElementById('location-search').value = place.display_name;
                                    suggestionsContainer.style.display = 'none';
                                    
                                    // Update map and marker
                                    const lat = parseFloat(place.lat);
                                    const lon = parseFloat(place.lon);
                                    map.setView([lat, lon], 10);
                                    marker.setLatLng([lat, lon]);
                                    
                                    // Update coordinates inputs
                                    updateCoordinates(lat, lon);
                                });
                                suggestionsContainer.appendChild(div);
                            });
                            
                            suggestionsContainer.style.display = 'block';
                        }
                    })
                    .catch(error => console.error('Error fetching search suggestions:', error));
            }, 500);
        });
        
        // Hide suggestions when clicking outside
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.location-search-container')) {
                document.getElementById('search-suggestions').style.display = 'none';
            }
        });
        
        // Update threshold value display
        document.getElementById('threshold').addEventListener('input', function() {
            document.getElementById('threshold-value').textContent = this.value + '%';
        });
        
        // Initialize weather chart
        const ctx = document.getElementById('weather-chart').getContext('2d');
        const weatherChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['ÙŠÙ†Ø§ÙŠØ±', 'ÙØ¨Ø±Ø§ÙŠØ±', 'Ù…Ø§Ø±Ø³', 'Ø£Ø¨Ø±ÙŠÙ„', 'Ù…Ø§ÙŠÙˆ', 'ÙŠÙˆÙ†ÙŠÙˆ', 'ÙŠÙˆÙ„ÙŠÙˆ', 'Ø£ØºØ³Ø·Ø³', 'Ø³Ø¨ØªÙ…Ø¨Ø±', 'Ø£ÙƒØªÙˆØ¨Ø±', 'Ù†ÙˆÙÙ…Ø¨Ø±', 'Ø¯ÙŠØ³Ù…Ø¨Ø±'],
                datasets: [{
                    label: 'Ø¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø±Ø§Ø±Ø© (Â°C)',
                    data: [12, 14, 18, 23, 28, 32, 34, 34, 30, 25, 19, 14],
                    borderColor: '#9e3030',
                    backgroundColor: 'rgba(158, 48, 48, 0.1)',
                    borderWidth: 3,
                    tension: 0.4,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    title: {
                        display: true,
                        text: 'Ù…ØªÙˆØ³Ø· Ø¯Ø±Ø¬Ø§Øª Ø§Ù„Ø­Ø±Ø§Ø±Ø© Ø§Ù„Ø´Ù‡Ø±ÙŠØ©',
                        font: {
                            size: 18,
                            family: 'Tajawal'
                        }
                    },
                    legend: {
                        position: 'top',
                        rtl: true,
                        labels: {
                            font: {
                                family: 'Tajawal',
                                size: 14
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: false,
                        title: {
                            display: true,
                            text: 'Ø¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø±Ø§Ø±Ø© (Â°C)',
                            font: {
                                family: 'Tajawal',
                                size: 14
                            }
                        }
                    },
                    x: {
                        title: {
                            display: true,
                            text: 'Ø§Ù„Ø´Ù‡Ø±',
                            font: {
                                family: 'Tajawal',
                                size: 14
                            }
                        }
                    }
                }
            }
        });
        
        // Handle analyze button click with dynamic probabilities
        document.getElementById('analyze-btn').addEventListener('click', function() {
            // Show loading state
            const originalText = this.innerHTML;
            this.innerHTML = '<i class="fas fa-circle-notch fa-spin"></i> Ø¬Ø§Ø±ÙŠ ØªØ­Ù„ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ù†Ø§Ø³Ø§...';
            this.disabled = true;
            
            // Get location coordinates and other inputs
            const lat = parseFloat(document.getElementById('latitude').value) || 31.95;
            const lng = parseFloat(document.getElementById('longitude').value) || 35.93;
            const threshold = parseInt(document.getElementById('threshold').value) || 60;
            const weatherType = document.getElementById('weather-variables').value;
            
            // Generate dynamic probabilities based on inputs
            const baseTempProb = Math.min(90, Math.max(10, 70 + (lat - 30) * 2));
            const baseRainProb = Math.min(80, Math.max(5, 40 - (lat - 30) * 1.5));
            const baseWindProb = Math.min(60, Math.max(10, 30 + Math.abs(lng - 35) * 1.2));
            
            // Adjust probabilities based on threshold
            const tempProbability = Math.min(95, Math.max(5, Math.round(baseTempProb * (threshold / 60))));
            const rainProbability = Math.min(90, Math.max(5, Math.round(baseRainProb * (threshold / 60))));
            const windProbability = Math.min(85, Math.max(5, Math.round(baseWindProb * (threshold / 60))));
            
            // Simulate API call to NASA
            setTimeout(() => {
                // Update results with dynamic probabilities
                document.getElementById('temp-probability').textContent = tempProbability + '%';
                document.getElementById('rain-probability').textContent = rainProbability + '%';
                document.getElementById('wind-probability').textContent = windProbability + '%';
                
                // Add animation to probability numbers
                animateProbabilityChange('temp-probability', tempProbability);
                animateProbabilityChange('rain-probability', rainProbability);
                animateProbabilityChange('wind-probability', windProbability);
                
                // Update chart with new data based on location
                const baseTemps = [12, 14, 18, 23, 28, 32, 34, 34, 30, 25, 19, 14];
                const adjustedTemps = baseTemps.map(temp => {
                    const variation = (lat - 31) * 0.5 + (Math.random() * 4 - 2);
                    return Math.round((temp + variation) * 10) / 10;
                });
                
                weatherChart.data.datasets[0].data = adjustedTemps;
                weatherChart.data.datasets[0].label = getWeatherLabel(weatherType);
                weatherChart.update();
                
                // Reset button
                this.innerHTML = originalText;
                this.disabled = false;
                
                // Show success notification
                showNotification('ØªÙ… ØªØ­Ù„ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ù†Ø§Ø³Ø§ Ø¨Ù†Ø¬Ø§Ø­ Ù„Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ø­Ø¯Ø¯!', 'success');
            }, 2000);
        });
        
        // Function to animate probability number changes
        function animateProbabilityChange(elementId, newValue) {
            const element = document.getElementById(elementId);
            element.style.animation = 'none';
            setTimeout(() => {
                element.style.animation = 'numberCount 1s ease-out';
            }, 10);
        }
        
        // Function to get weather label based on selection
        function getWeatherLabel(type) {
            const labels = {
                'temperature': 'Ø¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø±Ø§Ø±Ø© (Â°C)',
                'precipitation': 'Ù‡Ø·ÙˆÙ„ Ø§Ù„Ø£Ù…Ø·Ø§Ø± (mm)',
                'wind': 'Ø³Ø±Ø¹Ø© Ø§Ù„Ø±ÙŠØ§Ø­ (km/h)',
                'humidity': 'Ø§Ù„Ø±Ø·ÙˆØ¨Ø© Ø§Ù„Ù†Ø³Ø¨ÙŠØ© (%)'
            };
            return labels[type] || 'Ø¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø±Ø§Ø±Ø© (Â°C)';
        }
        
        // Handle download buttons
        document.getElementById('download-csv').addEventListener('click', function() {
            // Simulate CSV download
            const csvContent = "data:text/csv;charset=utf-8,"
                + "Ø§Ù„Ø´Ù‡Ø±,Ø¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø±Ø§Ø±Ø©\n"
                + weatherChart.data.labels.map((month, i) => `${month},${weatherChart.data.datasets[0].data[i]}`).join("\n");
            
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "Ù†Ø§Ø³Ø§_Ø¨ÙŠØ§Ù†Ø§Øª_Ø§Ù„Ø·Ù‚Ø³.csv");
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            showNotification('ØªÙ… ØªÙ†Ø²ÙŠÙ„ Ù…Ù„Ù CSV Ø¨Ù†Ø¬Ø§Ø­', 'success');
        });
        
        document.getElementById('download-json').addEventListener('click', function() {
            // Simulate JSON download
            const jsonData = {
                location: document.getElementById('location-search').value || "Ù…ÙˆÙ‚Ø¹ ØºÙŠØ± Ù…Ø­Ø¯Ø¯",
                coordinates: {
                    lat: document.getElementById('latitude').value,
                    lng: document.getElementById('longitude').value
                },
                date: document.getElementById('date-selection').value || new Date().toISOString().split('T')[0],
                probabilities: {
                    temperature: document.getElementById('temp-probability').textContent,
                    precipitation: document.getElementById('rain-probability').textContent,
                    wind: document.getElementById('wind-probability').textContent
                },
                temperatureData: weatherChart.data.labels.map((month, i) => ({
                    month,
                    temperature: weatherChart.data.datasets[0].data[i]
                }))
            };
            
            const jsonContent = "data:text/json;charset=utf-8," + JSON.stringify(jsonData, null, 2);
            const encodedUri = encodeURI(jsonContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "Ù†Ø§Ø³Ø§_Ø¨ÙŠØ§Ù†Ø§Øª_Ø§Ù„Ø·Ù‚Ø³.json");
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            showNotification('ØªÙ… ØªÙ†Ø²ÙŠÙ„ Ù…Ù„Ù JSON Ø¨Ù†Ø¬Ø§Ø­', 'success');
        });
        
        // Initialize 3D Earth
        function initEarth() {
            const container = document.getElementById('earth-container');
            const width = container.clientWidth;
            const height = container.clientHeight;
            
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, width / height, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
            renderer.setSize(width, height);
            container.appendChild(renderer.domElement);
            
            // Create Earth with Jordanian colors
            const geometry = new THREE.SphereGeometry(0.5, 32, 32);
            const material = new THREE.MeshPhongMaterial({ 
                color: 0x2a5c2a, // Jordan green
                specular: 0x9e3030, // Jordan red
                shininess: 30
            });
            const earth = new THREE.Mesh(geometry, material);
            scene.add(earth);
            
            // Add lights
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
            scene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
            directionalLight.position.set(5, 3, 5);
            scene.add(directionalLight);
            
            camera.position.z = 1.8;
            
            // Animation
            function animate() {
                requestAnimationFrame(animate);
                earth.rotation.y += 0.005;
                renderer.render(scene, camera);
            }
            
            animate();
        }
        
        // Initialize Earth when page loads
        window.addEventListener('load', initEarth);
        
        // Helper function to show notifications
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                bottom: 30px;
                left: 30px;
                padding: 18px 28px;
                border-radius: 12px;
                color: white;
                font-family: 'Tajawal', sans-serif;
                z-index: 10000;
                opacity: 0;
                transform: translateY(30px) scale(0.9);
                transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
                max-width: 350px;
                box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                background: var(--gradient-jordan);
                border: 2px solid var(--jordan-gold);
                font-weight: 600;
                font-size: 1.1rem;
            `;
            
            notification.textContent = message;
            document.body.appendChild(notification);
            
            // Animate in
            setTimeout(() => {
                notification.style.opacity = '1';
                notification.style.transform = 'translateY(0) scale(1)';
            }, 10);
            
            // Animate out and remove after 4 seconds
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translateY(30px) scale(0.9)';
                
                setTimeout(() => {
                    if (document.body.contains(notification)) {
                        document.body.removeChild(notification);
                    }
                }, 500);
            }, 4000);
        }
        
        // Set today's date as default
        document.getElementById('date-selection').valueAsDate = new Date();
        
        // Add interactive background effects
        document.addEventListener('mousemove', function(e) {
            const moveX = (e.clientX - window.innerWidth / 2) * 0.01;
            const moveY = (e.clientY - window.innerHeight / 2) * 0.01;
            
            document.querySelector('.stars').style.transform = `translate(${moveX}px, ${moveY}px)`;
        });
    </script>
</body>
</html>
